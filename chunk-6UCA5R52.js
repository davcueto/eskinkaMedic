import{a as de,b as ue,c as fe,d as he,e as be,f as ge,g as ze,h as Ce,i as ve,j as xe}from"./chunk-XAY4QU7J.js";import{d as ie,e as oe,f as re,g as ae,o as se,p as le,q as me,r as ce,u as pe}from"./chunk-B6IWTMBD.js";import{Ga as J,Ha as G,Ja as Q,Ka as Y,Na as K,Pa as Z,Qa as $,Sa as ee,Ta as te,Ua as ne,d as H}from"./chunk-46H64CNY.js";import{$b as w,Eb as b,L,Rb as f,Sb as c,Tb as C,Ub as j,Vb as k,Zb as F,_c as X,cd as q,db as I,fb as z,kb as O,lc as v,oc as B,pc as V,qc as W,sb as U,yb as y}from"./chunk-MHIWJWRJ.js";import"./chunk-O3NHZOCN.js";import{g as P}from"./chunk-RA2WU32H.js";function _e(s){return new Promise((e,n)=>{let t=new XMLHttpRequest;t.onload=function(){let i=new FileReader;i.onloadend=function(){e(i.result)},i.readAsDataURL(t.response)},t.onerror=n,t.open("GET",s),t.responseType="blob",t.send()})}function Se(s,e){if(s&1&&C(0,"iframe",15),s&2){let n=w();b("src",n.pdfPreviewUrl,I)}}function De(s,e){if(s&1&&C(0,"iframe",15),s&2){let n=w(2);b("src",n.pdfPreviewUrl,I)}}function Ne(s,e){if(s&1&&(j(0),y(1,De,1,1,"iframe",12),k()),s&2){let n=w();z(),b("ngIf",n.pdfPreviewUrl)}}var M=class s{constructor(e,n){this.fb=e;this.sanitizer=n;this.formCer=this.fb.group({nombre:[{value:"",disabled:!0},G.required],edad:[{value:"",disabled:!0},G.required],fecha:[{value:"",disabled:!0},G.required]})}formCer;formSub;pdfPreviewUrl=null;doc;isVisible=!1;ngOnInit(){this.buildPDF(),this.formSub=this.formCer.valueChanges.pipe(L(500)).subscribe(e=>P(this,null,function*(){this.previewPDF()}))}ngOnDestroy(){this.formSub.unsubscribe()}buildPDF(){return P(this,null,function*(){let e=this.formCer.value;this.doc=new de,this.doc.setFont("helvetica","bold"),this.doc.setFontSize(12),this.doc.text("DR. JOSE GABRIEL CASAHONDA ESQUINCA.",105,30,{align:"center"}),this.doc.text("C\xE9d. Prof. 701460 SSA 89437",105,36,{align:"center"}),this.doc.text("M\xE9dico General Certificado",105,42,{align:"center"}),this.doc.text("U. A. E. M.",105,49,{align:"center"}),this.doc.line(20,54,190,54),this.doc.setLineWidth(.5),this.doc.line(20,55,190,55);try{let n=yield this.convertImageToBase64("assets/simbolo.png");this.doc.addImage(n,"PNG",15,25,30,20),this.doc.addImage(n,"PNG",165,25,30,20)}catch(n){console.error("Error cargando la imagen",n)}this.doc.setFont("helvetica","bold"),this.doc.text("DR. JOSE GABRIEL CASAHONDA ESQUINCA",105,250,{align:"center"}),this.doc.setLineWidth(.5),this.doc.line(20,260,190,260),this.doc.text("TELEFONO 964-64-2-10-46",105,266,{align:"center"}),this.doc.line(20,270,190,270),this.previewPDF()})}convertImageToBase64(e){return new Promise((n,t)=>{let i=new XMLHttpRequest;i.onload=function(){let o=new FileReader;o.onloadend=function(){n(o.result)},o.readAsDataURL(i.response)},i.onerror=t,i.open("GET",e),i.responseType="blob",i.send()})}setImage(){return P(this,null,function*(){_e("assets/snake.jpg").then(e=>{console.log("obtenido",e),this.doc.addImage(e,"JPEG",15,40,180,100)}).catch(e=>{console.error("Error al cargar la imagen:",e)})})}previewPDF(){let e=this.doc.output("blob"),n=URL.createObjectURL(e);this.pdfPreviewUrl=this.sanitizer.bypassSecurityTrustResourceUrl(n)}submit(){console.log(this.formCer.value)}justificarTexto(e,n,t,i,o,d,p){let h=n.split(" "),a="",l=i,m=!0;for(let g=0;g<h.length;g++){let _=h[g],S=m?t+p:t,D=m?o-p:o,N=a+_+" ";e.getTextWidth(N)>D&&a!==""?(this.justificarLinea(e,a.trim(),S,l,D),a=_+" ",l+=d,m=!1):a=N}let r=m?t+p:t,x=m?o-p:o;e.text(a.trim(),r,l)}justificarLinea(e,n,t,i,o){let d=n.split(" "),p=d.length-1;if(p===0){e.text(n,t,i);return}let h=0;d.forEach(r=>{h+=e.getTextWidth(r)});let l=(o-h)/p,m=t;d.forEach((r,x)=>{e.text(r,m,i),m+=e.getTextWidth(r)+l})}subrayarTexto(e,n,t,i){e.text(n,t,i);let o=e.getTextWidth(n);e.line(t,i+1,t+o,i+1)}justificarTextoConCampos(e,n,t,i,o,d,p){let h=n.split(" "),a=[],l=o,m=(r,x=!1)=>{let g=r.join(" "),_=e.getTextWidth(g),S=r.length-1,D=e.getTextWidth(" "),N=S>0&&!x?(d-_)/S:0,u=i;for(let T=0;T<r.length;T++){let E=r[T];if(t[E]){let R=t[E];e.text(R,u,l);let A=e.getTextWidth(R);e.line(u,l+1,u+A,l+1),u+=A}else e.text(E,u,l),u+=e.getTextWidth(E);T<r.length-1&&(u+=D+N)}l+=p};for(let r of h){let x=[...a,r];e.getTextWidth(x.join(" "))>d?(m(a),a=[r]):a.push(r)}a.length>0&&m(a,!0)}showModal(){this.isVisible=!0}handleOk(){console.log("Button ok clicked!"),this.isVisible=!1}handleCancel(){console.log("Button cancel clicked!"),this.isVisible=!1}static \u0275fac=function(n){return new(n||s)(O(ee),O(H))};static \u0275cmp=U({type:s,selectors:[["app-general"]],decls:26,vars:4,consts:[["nz-row",""],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","12","nzXl","12"],[3,"ngSubmit","formGroup"],["nz-col","","nzXs","24","nzSm","24","nzMd","24","nzLg","20","nzXl","20"],[2,"margin-bottom","3%"],["formControlName","nombre","nz-input","","nzSize","large",1,"custom-btn",3,"disabled"],["formControlName","edad","nz-input","","nzSize","large",1,"custom-btn"],[2,"margin-bottom","3%","display","grid"],["formControlName","fecha","nzSize","large",1,"custom-btn"],["nz-button","","nzType","primary","nzShape","round"],["nz-flex","","nzJustify","flex-end",2,"margin-bottom","2%"],["nz-button","","nzType","primary","nzShape","round",3,"click"],["width","100%","height","500px",3,"src",4,"ngIf"],["nzTitle","","nzWidth","1000px",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],[4,"nzModalContent"],["width","100%","height","500px",3,"src"]],template:function(n,t){n&1&&(f(0,"div",0)(1,"div",1)(2,"form",2),F("ngSubmit",function(){return t.submit()}),f(3,"div",0)(4,"div",3)(5,"div",4)(6,"label"),v(7,"Nombre"),c(),C(8,"input",5),c(),f(9,"div",4)(10,"label"),v(11,"Edad"),c(),C(12,"input",6),c(),f(13,"div",7)(14,"label"),v(15,"Fecha"),c(),C(16,"nz-date-picker",8),c()(),f(17,"button",9),v(18," Descargar Certificado "),c()()()(),f(19,"div",1)(20,"div",10)(21,"button",11),F("click",function(){return t.showModal()}),v(22,"Vista previa"),c()(),y(23,Se,1,1,"iframe",12),c()(),f(24,"nz-modal",13),W("nzVisibleChange",function(o){return V(t.isVisible,o)||(t.isVisible=o),o}),F("nzOnCancel",function(){return t.handleCancel()})("nzOnOk",function(){return t.handleOk()}),y(25,Ne,2,1,"ng-container",14),c()),n&2&&(z(2),b("formGroup",t.formCer),z(6),b("disabled",!0),z(15),b("ngIf",t.pdfPreviewUrl),z(),B("nzVisible",t.isVisible))},dependencies:[ne,K,J,Q,Y,Z,$,me,le,se,pe,ce,ae,re,ie,oe,fe,ue,be,he,ge,ve,Ce,ze,q,X,te],encapsulation:2})};var rt=[{path:"",children:[{path:"resetageneral",component:M,canActivate:[xe]}]}];export{rt as routes};
